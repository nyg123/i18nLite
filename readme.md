# å¤šè¯­è¨€ç®¡ç†å·¥å…·ï¼ˆMVPï¼‰

ä¸€ä¸ªæœ¬åœ°éƒ¨ç½²ã€è½»é‡çº§çš„å¤šè¯­è¨€æ–‡ä»¶ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒ `.po` å’Œ Excel æ ¼å¼çš„å¯¼å…¥å¯¼å‡ºï¼Œä¾¿äºç»´æŠ¤é¡¹ç›®ä¸­ä¸åŒè¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶ã€‚è¯¥é¡¹ç›®åŸºäº Golang + Layui æ„å»ºï¼Œé‡‡ç”¨ä¸‰å±‚æ¶æ„ï¼š**é¡¹ç›®ç®¡ç† â†’ Keyç®¡ç† â†’ ç¿»è¯‘ç®¡ç†**ï¼Œæ”¯æŒ ISO 639-1 æ ‡å‡†è¯­è¨€ä»£ç ã€‚

---

## ğŸ“¦ æŠ€æœ¯æ ˆ

- **åç«¯**ï¼šGolang (Gin) + MySQL
- **å‰ç«¯**ï¼šLayui
- **å¯¼å…¥å¯¼å‡ºæ”¯æŒåº“**ï¼š
    - `.po` æ–‡ä»¶ï¼š[`leonelquinteros/gotext`](https://github.com/leonelquinteros/gotext)
    - `.xlsx` æ–‡ä»¶ï¼š[`xuri/excelize`](https://github.com/xuri/excelize)
- **éƒ¨ç½²æ–¹å¼**ï¼šDockerï¼ˆé¢„ç•™ç™»å½•æƒé™æ¨¡å—ï¼‰

---

## ğŸ¯ MVP åŠŸèƒ½åˆ—è¡¨

### ğŸ“‚ é¡¹ç›®ç®¡ç†æ¨¡å—

- [x] åˆ›å»ºæ–°é¡¹ç›®
- [x] åˆ é™¤é¡¹ç›®ï¼ˆçº§è”åˆ é™¤æ‰€æœ‰Keyå’Œç¿»è¯‘ï¼‰
- [x] ç¼–è¾‘é¡¹ç›®ä¿¡æ¯ï¼ˆåç§°ã€æè¿°ï¼‰
- [x] æŸ¥çœ‹é¡¹ç›®åˆ—è¡¨ï¼ˆåˆ†é¡µå±•ç¤ºï¼‰
- [x] æœç´¢é¡¹ç›®åç§°

### ğŸ”‘ Key ç®¡ç†æ¨¡å—

- [x] æ·»åŠ æ–°çš„ç¿»è¯‘ Keyï¼ˆåœ¨æŒ‡å®šé¡¹ç›®ä¸‹ï¼‰
- [x] åˆ é™¤å·²æœ‰ Keyï¼ˆçº§è”åˆ é™¤æ‰€æœ‰ç¿»è¯‘ï¼‰
- [x] ç¼–è¾‘ Key ä¿¡æ¯ï¼ˆKeyåç§°ã€æ³¨é‡Šï¼‰
- [x] æŸ¥çœ‹ Key åˆ—è¡¨ï¼ˆæŒ‰é¡¹ç›®ç­›é€‰ã€åˆ†é¡µå±•ç¤ºï¼‰
- [x] æœç´¢ Key åç§°

### ğŸŒ ç¿»è¯‘ç®¡ç†æ¨¡å—

- [x] æ·»åŠ /ç¼–è¾‘æŒ‡å®š Key çš„ç¿»è¯‘å†…å®¹
- [x] åˆ é™¤æŸè¯­è¨€çš„ç¿»è¯‘
- [x] æ”¯æŒ ISO 639-1 æ ‡å‡†è¯­è¨€ä»£ç ï¼ˆå¦‚ï¼šenã€zhã€frã€deï¼‰
- [x] æ‰¹é‡ç¼–è¾‘æŸ Key çš„æ‰€æœ‰è¯­è¨€ç¿»è¯‘
- [x] Inline è¡¨æ ¼ç¼–è¾‘è¯‘æ–‡å†…å®¹

### ğŸ“ æ–‡ä»¶å¯¼å…¥å¯¼å‡º

- [x] æ”¯æŒ `.po` æ–‡ä»¶å¯¼å…¥ï¼Œè§£æå¤šè¯­è¨€å†…å®¹
- [x] æ”¯æŒ Excel æ–‡ä»¶å¯¼å…¥ï¼ˆç¬¬ä¸€è¡Œä¸ºæ ‡é¢˜ï¼šKeyã€æ³¨é‡Šã€å¤šè¯­è¨€åˆ—ï¼‰
- [x] æ”¯æŒå°†å½“å‰æ•°æ®å¯¼å‡ºä¸º `.po` æ–‡ä»¶ï¼ˆæŒ‰è¯­è¨€æ‹†åˆ†ï¼‰
- [x] æ”¯æŒå°†å½“å‰æ•°æ®å¯¼å‡ºä¸º Excel è¡¨æ ¼ï¼ˆå¤šè¯­è¨€åˆ—ï¼‰

### ğŸŒ å‰ç«¯äº¤äº’æµç¨‹

1. **é¡¹ç›®åˆ—è¡¨é¡µ** â†’ ç‚¹å‡»é¡¹ç›®è¿›å…¥Keyç®¡ç†
2. **Keyåˆ—è¡¨é¡µ** â†’ ç‚¹å‡»Keyè¿›å…¥ç¿»è¯‘ç®¡ç†  
3. **ç¿»è¯‘ç¼–è¾‘é¡µ** â†’ å¤šè¯­è¨€ç¼–è¾‘ç•Œé¢

---

### ğŸ›  åç«¯ API æ¥å£

#### é¡¹ç›®ç®¡ç† API

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| GET  | `/api/projects` | è·å–é¡¹ç›®åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€æœç´¢ï¼‰ |
| POST | `/api/projects` | åˆ›å»ºæ–°é¡¹ç›® |
| PUT  | `/api/projects/:id` | æ›´æ–°é¡¹ç›®ä¿¡æ¯ |
| DELETE | `/api/projects/:id` | åˆ é™¤é¡¹ç›®ï¼ˆçº§è”åˆ é™¤ï¼‰ |

#### Key ç®¡ç† API

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| GET  | `/api/projects/:projectId/keys` | è·å–æŒ‡å®šé¡¹ç›®çš„Keyåˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€æœç´¢ï¼‰ |
| POST | `/api/projects/:projectId/keys` | åœ¨æŒ‡å®šé¡¹ç›®ä¸‹æ–°å¢ Key |
| PUT  | `/api/keys/:id` | æ›´æ–° Key ä¿¡æ¯ |
| DELETE | `/api/keys/:id` | åˆ é™¤ Keyï¼ˆçº§è”åˆ é™¤ç¿»è¯‘ï¼‰ |

#### ç¿»è¯‘ç®¡ç† API

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| GET  | `/api/keys/:keyId/translations` | è·å–æŒ‡å®šKeyçš„æ‰€æœ‰ç¿»è¯‘ |
| POST | `/api/keys/:keyId/translations` | æ–°å¢ç¿»è¯‘ |
| PUT  | `/api/translations/:id` | æ›´æ–°ç¿»è¯‘å†…å®¹ |
| DELETE | `/api/translations/:id` | åˆ é™¤ç¿»è¯‘ |

#### å¯¼å…¥å¯¼å‡º API

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| POST | `/api/projects/:projectId/import/po` | å¯¼å…¥ `.po` æ–‡ä»¶åˆ°æŒ‡å®šé¡¹ç›® |
| POST | `/api/projects/:projectId/import/excel` | å¯¼å…¥ `.xlsx` æ–‡ä»¶åˆ°æŒ‡å®šé¡¹ç›® |
| GET  | `/api/projects/:projectId/export/po?lang=en` | å¯¼å‡ºæŒ‡å®šé¡¹ç›®æŸè¯­è¨€çš„ `.po` æ–‡ä»¶ |
| GET  | `/api/projects/:projectId/export/excel` | å¯¼å‡ºæŒ‡å®šé¡¹ç›®çš„å…¨é‡ Excel æ–‡ä»¶ |

---

### ğŸ¬ æ•°æ®åº“è®¾è®¡ï¼ˆMySQLï¼‰

#### è¡¨ï¼š`projects`ï¼ˆé¡¹ç›®è¡¨ï¼‰

| å­—æ®µå       | ç±»å‹         | æè¿°             |
|--------------|--------------|------------------|
| id           | bigint       | ä¸»é”®             |
| name         | varchar(128) | é¡¹ç›®åç§°         |
| description  | text         | é¡¹ç›®æè¿°         |
| created_at   | datetime     | åˆ›å»ºæ—¶é—´         |
| updated_at   | datetime     | æ›´æ–°æ—¶é—´         |

#### è¡¨ï¼š`translation_keys`ï¼ˆKeyè¡¨ï¼‰

| å­—æ®µå       | ç±»å‹         | æè¿°             |
|--------------|--------------|------------------|
| id           | bigint       | ä¸»é”®             |
| project_id   | bigint       | é¡¹ç›®IDï¼ˆå¤–é”®ï¼‰   |
| key_name     | varchar(255) | ç¿»è¯‘ Key         |
| comment      | text         | æ³¨é‡Š             |
| created_at   | datetime     | åˆ›å»ºæ—¶é—´         |
| updated_at   | datetime     | æ›´æ–°æ—¶é—´         |

#### è¡¨ï¼š`translations`ï¼ˆç¿»è¯‘è¡¨ï¼‰

| å­—æ®µå       | ç±»å‹         | æè¿°                    |
|--------------|--------------|-------------------------|
| id           | bigint       | ä¸»é”®                    |
| key_id       | bigint       | Key IDï¼ˆå¤–é”®ï¼‰          |
| lang         | char(2)      | è¯­è¨€ä»£ç ï¼ˆISO 639-1ï¼‰   |
| translation  | text         | è¯‘æ–‡å†…å®¹                |
| created_at   | datetime     | åˆ›å»ºæ—¶é—´                |
| updated_at   | datetime     | æ›´æ–°æ—¶é—´                |

#### ç´¢å¼•å»ºè®®

- `projects`: `name` å”¯ä¸€ç´¢å¼•
- `translation_keys`: `project_id + key_name` å”¯ä¸€ç´¢å¼•
- `translations`: `key_id + lang` å”¯ä¸€ç´¢å¼•

#### å¤–é”®å…³ç³»

- `translation_keys.project_id` â†’ `projects.id`ï¼ˆçº§è”åˆ é™¤ï¼‰
- `translations.key_id` â†’ `translation_keys.id`ï¼ˆçº§è”åˆ é™¤ï¼‰

---

## ğŸŒŸ é¡µé¢å¯¼èˆªæµç¨‹

```
é¦–é¡µï¼ˆé¡¹ç›®åˆ—è¡¨ï¼‰
    â†“ [ç‚¹å‡»é¡¹ç›®]
Keyç®¡ç†é¡µé¢ï¼ˆæ˜¾ç¤ºè¯¥é¡¹ç›®ä¸‹çš„æ‰€æœ‰Keyï¼‰
    â†“ [ç‚¹å‡»Key]
ç¿»è¯‘ç®¡ç†é¡µé¢ï¼ˆç¼–è¾‘è¯¥Keyçš„æ‰€æœ‰è¯­è¨€ç¿»è¯‘ï¼‰
```

### é¡µé¢åŠŸèƒ½è¯´æ˜

1. **é¡¹ç›®åˆ—è¡¨é¡µ**ï¼š
   - æ˜¾ç¤ºæ‰€æœ‰é¡¹ç›®å¡ç‰‡
   - æ”¯æŒåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤é¡¹ç›®
   - æœç´¢é¡¹ç›®åç§°

2. **Keyç®¡ç†é¡µ**ï¼š
   - é¢åŒ…å±‘å¯¼èˆªï¼šé¦–é¡µ > é¡¹ç›®å
   - æ˜¾ç¤ºå½“å‰é¡¹ç›®ä¸‹çš„æ‰€æœ‰Key
   - æ”¯æŒæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤Key
   - æœç´¢Keyåç§°
   - å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½ï¼ˆé’ˆå¯¹å½“å‰é¡¹ç›®ï¼‰

3. **ç¿»è¯‘ç®¡ç†é¡µ**ï¼š
   - é¢åŒ…å±‘å¯¼èˆªï¼šé¦–é¡µ > é¡¹ç›®å > Keyå
   - æ˜¾ç¤ºå½“å‰Keyçš„æ‰€æœ‰è¯­è¨€ç¿»è¯‘
   - æ”¯æŒæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ç¿»è¯‘
   - ISO 639-1 è¯­è¨€é€‰æ‹©å™¨

---

## ğŸŒ æ”¯æŒçš„è¯­è¨€ä»£ç ï¼ˆISO 639-1ï¼‰

| ä»£ç  | è¯­è¨€ | ä»£ç  | è¯­è¨€ |
|------|------|------|------|
| en   | English | zh   | ä¸­æ–‡ |
| fr   | FranÃ§ais | de   | Deutsch |
| es   | EspaÃ±ol | ja   | æ—¥æœ¬èª |
| ko   | í•œêµ­ì–´ | ru   | Ğ ÑƒÑÑĞºĞ¸Ğ¹ |
| pt   | PortuguÃªs | it   | Italiano |
| ar   | Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© | hi   | à¤¹à¤¿à¤¨à¥à¤¦à¥€ |

---

## ğŸ³ Docker ä½¿ç”¨ï¼ˆæœ¬åœ°è¿è¡Œï¼‰

```bash
# æ„å»ºé•œåƒ
docker build -t i18n-manager .

# è¿è¡ŒæœåŠ¡
docker run -p 8080:8080 --name i18n-manager \
  -v /path/to/local/files:/data \
  -e MYSQL_DSN="user:password@tcp(host:port)/dbname" \
  i18n-manager
